A=[[5321853255188242215199526501791822956295996273220696402211830037431624946397209174202996671625522649801658747827639078585929800825880063904827458898159182,1548069588052432356874948206009010638787643270238107340957178920541448426280433776249630426645210985246895018229854400470280423114755306318698324403338642],[4015166219736761869663276841648459265057691888820592593327514311026552990082143823978687762066375220451642006095671577781703702604642825072833618945202720,4918690736587302642417168558561637553600045426166053150194031735016429044370613271649507401229185082558331183749785144169026804908370754501555394309964381]]
B=[[5516928663603488494893782317344506529020326123190989551089949040781434653297827990623809605084984927955694404659242388316465605759586526493968865571421081,3585967899344609009037790107829486044996598173499092435142424345261714535406788068137843279067643362028229671774228116081683150511125638939099326380987341],
[5938060493091058065165419531684832701805673396280927179195473807634264675195266356836267155697312700140724507206365069461880864798807368968951656328005707,845413872107246215501210292421593368324203292641479435583051711604376122818601789080925439809815734946501188618034827382545545430359567119206408927749446]]
C=[[185457326650392785064069653919079554553095419066261304930201040044117023939641609072872514058607702552929531084823505403295216884650837501263079043122670,7403018729172695359279297546973820793147245752379717526101217466407076628946609401645803404176300285281119288374839411176813950995663928453906629856572405],
[5154093845396650883731098188786715938240339384051236052894490033420157270383634871740957689937931878451012956910998343672350417688012091618830957847509971,5419531558651788678010472133434388127795054268874715362984830988429299057188960020036902245269499107963310599241222966294870107175610615471544881842905799]]
D=[[4036635852484079549111045248494552939538248345966339537150945186893080157983412300040476111406356370601531078883278173851170984333917284297426143111571709,596468495994528941401517456013612238295254796899038007769445144199165944551247295428176112441385299840125584097970243984257660496925045120562390606652501],
[6742470293832701000983011109732101866040259929736541475757531400529361280815662410260819567915891576526732152632170543250839373270841626660666286370978624,5672681912915265231989929076063764392540646722150209574534426498433507166296500535320558166936803978531406850875425193882116345602452721457401100998365193]]
E=[[5641307532629123371198731532264772721331001617422649721096219763263611730753502521528430905789506021069216147389433103088398807085422878743525638107204448,2699346502280662124731147296308997195193881455747298388052478823904920526092257665403319461769710345972409290821656919360211371469885688692484639671825029],
[6804990509731623299313170750908897727791627291155325189842067799776542745869578597989502482464690506912297507158731136737696493604710301363233968234220833,138212807372139391722105123101977661314587259252301449481818101641151340845670417785041291299130302818741620705072805694449911506040531725691224345037861]]
F=[[6495288007486846137816677979649618527775432439162621678960102551192533298735936342986446773351606335495995407200149009925478491730491328955919092298470882,3416919839328766793790188006151498791567313675716270560402522961453270104390494974324252037751572491990249446441644935429094550175272037605919488234068805],
[7525645066717563723429760973178488308913377814198285586867107657168027497155046888992023483604902702161093633376243817701856715539797307856268483555311367,6756792646085771049013888795634452663078894348653979942495818197596522084641853921595127490258911845910974714276776615461094196204670677136815082392769357]]

n= 7736182081319065065299979322365923213057280909894235948158435339065907861182099444485865860284191438695235876407849016746755729622324142199944601817305841

alpha=  [[6892415679487196584828787918504776207824729679990871316965675370790961388633987942951908446348344647718399501015983013992613663697975972173236310921476568, 4050310676119811212572221306019402935341564569293327950583439834826649348872674353367099468453971509905235321797840676411826356549298589400513066127923615],
[4960227903077242762499962983790318345406078667413183564566980268767043346618322131822835006676992397457654431827415077928326340853102617885439096509618769, 1648262876789440845401427479221990169674151369163258412092629400911443638585693291744975255278299793620643925312862589134175144979857169300345617606715032]]

beta=[ [3379536633641162889448005355697228437671374233357605546435083173936633719265854030476625480566423034091603255834338595214634933078420501073584913243865448, 6423258751842486697305087005078690012245992193697354870941374968982049678204765468440302262798688505353114830135405620199862588266789206596717154318449443],
[6480907771825311889817570738453922835977678449556454115430955397804533565632311091831539655205767122423253706317647265485508740206535511121579369312816817, 4063146489520238972209787063158426391795621385017635730115089821519169903787736984328786982918839226197859125293341520389646876793048569094001995502193615]]

gamma= [[2770373139888246045270385431321427510844952764705359357991301751190672487418989073854699823591943024588021022821011198163802173174729266922797239256458049, 4768810598239143608832409990545687331783229751837412008818774083292394364767956096887448570583328712758573354152466486976729905277939266710703632053141226],
[6592041193139423577875507522608284553534565586169128887141035828121085586456686239308421730468716161775017144600607554626876943118170058698536581877763127, 2502426846303464439621570063950670568191972953601794995029036431158802977891427935327193662420618642902603912938160964304720308456087354295302732152271585]]

ct = [[5402284271940099905686389984676819918833005833176438483953602462293574131447191772115588027489137725980191728662251853581178456570640773116208211975599231, 1002722716967836932726190661672850821047206183104619485538759477441602395187509478530582967887267582114659815627922965086908306462702417519718497059303495],
[390086465346440420336743434754025934702117618842961282205627994599297659064058664583902462270672370565329178654250663360835245412530769193422187742060528, 7229480721015667914440220674643289223555755489445744837220213894765791588095430181455412807983669806899411320444307454095010969615205943731053303890362965]]

zn = IntegerModRing(n)
I = identity_matrix(zn,2)
A,B,C,D,E,F,alpha,beta,gamma,ct = map(lambda x:Matrix(zn,x),[A,B,C,D,E,F,alpha,beta,gamma,ct])

    
def solve_XB_AX(X,A,B):
    mm = block_matrix(zn,[[B-A[0][0]*I,-A[0][1]*I],[-A[1][0]*I,B-A[1][1]*I]])
    xx = vector(zn,[X[0][0],X[0][1],X[1][0],X[1][1]])
    return mm,xx


[[a1,a2],[a3,a4]],[[b1,b2],[b3,b4]] = A,B
[[d1,d2],[d3,d4]],[[e1,e2],[e3,e4]] = D,E
[[c1,c2],[c3,c4]],[[f1,f2],[f3,f4]] = C,F

mat = [ [a1,0,a2,0,b1,0,b2,0],
        [0,a1,0,a2,0,b1,0,b2],
        [a3,0,a4,0,b3,0,b4,0],
        [0,a3,0,a4,0,b3,0,b4],
        [d1,0,d2,0,e1,0,e2,0],
        [0,d1,0,d2,0,e1,0,e2],
        [d3,0,d4,0,e3,0,e4,0],
        [0,d3,0,d4,0,e3,0,e4]]
mat = Matrix(zn,mat)
svec = vector(zn,[c1,c2,c3,c4,f1,f2,f3,f4])
(x1,x2,x3,x4,y1,y2,y3,y4) = mat.solve_right(svec)
X,Y = Matrix(zn,[[x1,x2],[x3,x4]]),Matrix(zn,[[y1,y2],[y3,y4]])



